import{a as Z,b as R}from"./chunk-BK52BINW.js";import{a as U}from"./chunk-BBSXS3BO.js";import{a as X,b as B}from"./chunk-CHVYWF5D.js";import"./chunk-VV2CGQPP.js";import{a as D,b as O}from"./chunk-MKB7KLW2.js";import"./chunk-KSOXGKKK.js";import"./chunk-LOSE3ZCH.js";import"./chunk-7IUY3HME.js";import{a as F,b as z}from"./chunk-QIKBV2MJ.js";import"./chunk-HTTFB544.js";import"./chunk-POQXMLX6.js";import"./chunk-WAACE3S3.js";import{b as L,e as W,f as j,i as I}from"./chunk-P7PTI55Z.js";import"./chunk-XSSXK7EZ.js";import{i as V,k as N}from"./chunk-GWROTBBW.js";import{i as b}from"./chunk-W3XEXHXD.js";import{$a as c,Ea as n,Fa as a,Ga as y,Gb as P,Ib as k,La as h,M as E,Q as M,Qb as x,R as w,Wa as m,_a as p,ab as f,bb as S,dc as A,fb as g,gc as _,ja as d,ka as v,va as T,xa as u}from"./chunk-3BCS6XGD.js";var C=(s,t)=>({"valid-field":s,"invalid-field":t});function J(s,t){s&1&&(n(0,"div",21)(1,"p"),m(2,"Carregando..."),a()())}var G=(()=>{let t=class t{constructor(i,o,e){this.userService=i,this.router=o,this.messageService=e,this.usernameExists=!1,this.isEmailValid=!0,this.isPasswordStrong=!0,this.isPhoneValid=!0,this.usernameTouched=!1,this.emailTouched=!1,this.passwordTouched=!1,this.telephoneTouched=!1,this.isLoading=!1}createAccount(){if(this.validatePassword(),this.validateEmail(),this.validateTelephone(),this.checkUsername(),!this.isFormValid()){this.showError("Erro","Por favor, corrija os erros antes de continuar.");return}this.isLoading=!0;let i={name:this.name,username:this.username,email:this.email,password:this.password,telephone:this.telephone};this.userService.register(i).subscribe({next:o=>{this.isLoading=!1,console.log("Account created successfully",o),this.router.navigate(["/auth/confirmation"],{queryParams:{email:this.email}})},error:o=>{this.isLoading=!1,this.showError("Erro","Erro ao criar a conta. Por favor, tente novamente."),console.error("Error creating account",o)}})}checkUsername(){if(this.usernameTouched=!0,!this.username||this.username.trim()===""){this.usernameExists=!0,this.showError("Erro","Nome de usu\xE1rio n\xE3o pode ser vazio.");return}this.userService.checkUsernameAvailability(this.username).subscribe(i=>{this.usernameExists=!i,this.usernameExists&&this.showError("Erro","Nome de usu\xE1rio j\xE1 est\xE1 em uso.")},i=>{this.showError("Erro","Erro ao verificar a disponibilidade do nome de usu\xE1rio."),console.error("Error checking username availability",i)})}checkEmail(){if(this.emailTouched=!0,!this.email||this.email.trim()===""){this.isEmailValid=!1,this.showError("Erro","O email n\xE3o pode ser vazio.");return}this.userService.checkEmailAvailability(this.email).subscribe(i=>{this.isEmailValid=i,this.isEmailValid||this.showError("Erro","O email j\xE1 est\xE1 em uso.")},i=>{this.showError("Erro","Erro ao verificar a disponibilidade do email."),console.error("Error checking email availability",i)})}checkTelephone(){if(this.telephoneTouched=!0,!this.telephone||this.telephone.trim()===""){this.isPhoneValid=!1,this.showError("Erro","O telefone n\xE3o pode ser vazio.");return}this.userService.checkTelephoneAvailability(this.telephone).subscribe(i=>{this.isPhoneValid=i,this.isPhoneValid||this.showError("Erro","O telefone j\xE1 est\xE1 em uso.")},i=>{this.showError("Erro","Erro ao verificar a disponibilidade do telefone."),console.error("Error checking telephone availability",i)})}validateEmail(){this.emailTouched=!0;let i=/^[a-zA-Z0-9._-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,4}$/;this.isEmailValid=i.test(this.email),this.isEmailValid||this.showError("Erro","Email inv\xE1lido.")}validatePassword(){this.passwordTouched=!0;let i=/^(?=.*[a-z])(?=.*[A-Z])(?=.*\d)(?=.*[@$!%*?&])[A-Za-z\d@$!%*?&]{8,}$/;this.isPasswordStrong=i.test(this.password),this.isPasswordStrong||this.showError("Erro","Senha fraca. Deve ter pelo menos 8 caracteres, incluindo mai\xFAsculas, min\xFAsculas, n\xFAmeros e caracteres especiais.")}validateTelephone(){this.telephoneTouched=!0;let i=this.telephone;this.telephone.length===11&&(i=`(${this.telephone.slice(0,2)}) ${this.telephone.slice(2,7)}-${this.telephone.slice(7)}`),console.log(i);let o=/^\(\d{2}\)\s\d{4,5}-\d{4}$/;this.isPhoneValid=o.test(i),this.isPhoneValid||this.showError("Erro","Telefone inv\xE1lido. Use o formato (XX) XXXXX-XXXX.")}isFormValid(){return!this.usernameExists&&this.isEmailValid&&this.isPasswordStrong&&this.isPhoneValid}showError(i,o){this.messageService.add({severity:"error",summary:i,detail:o})}};t.\u0275fac=function(o){return new(o||t)(v(U),v(A),v(b))},t.\u0275cmp=M({type:t,selectors:[["app-create-account"]],features:[S([b])],decls:34,vars:23,consts:[[1,"surface-ground","flex","align-items-center","justify-content-center","min-h-screen","min-w-screen","overflow-hidden"],[1,"flex","flex-column","align-items-center","justify-content-center"],["src","assets/logo digitalize2.png","alt","Logo",1,"mb-5","w-6rem","flex-shrink-0"],[2,"border-radius","56px","padding","0.3rem","background",`linear-gradient(
                    180deg,
                    var(--primary-color) 10%,
                    rgba(33, 150, 243, 0) 30%
                )`],[1,"w-full","surface-card","py-8","px-5","sm:px-8",2,"border-radius","53px"],[1,"text-center","mb-5"],[1,"text-900","text-3xl","font-medium","mb-3"],[1,"text-600","font-medium"],[1,"field"],["for","name",1,"block","text-900","text-xl","font-medium","mb-2"],["id","name","type","text","placeholder","Nome completo","pInputText","",1,"w-full","md:w-30rem","mb-5",2,"padding","1rem",3,"ngModelChange","ngModel"],["for","username",1,"block","text-900","text-xl","font-medium","mb-2"],["id","username","type","text","placeholder","Nome de usu\xE1rio","pInputText","",1,"w-full","md:w-30rem","mb-5",2,"padding","1rem",3,"ngModelChange","blur","ngModel","ngClass"],["for","email",1,"block","text-900","text-xl","font-medium","mb-2"],["id","email","type","text","placeholder","Endere\xE7o de email","pInputText","",1,"w-full","md:w-30rem","mb-5",2,"padding","1rem",3,"ngModelChange","blur","ngModel","ngClass"],["for","password",1,"block","text-900","font-medium","text-xl","mb-2"],["id","password","placeholder","Senha","styleClass","mb-5","inputStyleClass","w-full p-3 md:w-30rem","promptLabel","Digite uma senha","weakLabel","Fraca","mediumLabel","M\xE9dia","strongLabel","Forte",3,"ngModelChange","blur","ngModel","toggleMask","ngClass"],["for","phone",1,"block","text-900","text-xl","font-medium","mb-2"],["id","phone","type","text","placeholder","Telefone para contato","pInputText","","mask","(00) 00000-0000",1,"w-full","md:w-30rem","mb-5",2,"padding","1rem",3,"ngModelChange","blur","ngModel","ngClass"],["pButton","","pRipple","","label","Criar Conta",1,"w-full","p-3","text-xl",3,"click"],["class","loading-overlay",4,"ngIf"],[1,"loading-overlay"]],template:function(o,e){o&1&&(n(0,"div",0)(1,"div",1),y(2,"img",2),n(3,"div",3)(4,"div",4)(5,"div",5)(6,"div",6),m(7," Criar Conta "),a(),n(8,"span",7),m(9,"Preencha os dados para criar uma conta"),a()(),n(10,"div")(11,"div",8)(12,"label",9),m(13,"Nome Completo"),a(),n(14,"input",10),f("ngModelChange",function(r){return c(e.name,r)||(e.name=r),r}),a()(),n(15,"div",8)(16,"label",11),m(17,"Nome de Usu\xE1rio"),a(),n(18,"input",12),f("ngModelChange",function(r){return c(e.username,r)||(e.username=r),r}),h("blur",function(){return e.checkUsername()}),a()(),n(19,"div",8)(20,"label",13),m(21,"Email"),a(),n(22,"input",14),f("ngModelChange",function(r){return c(e.email,r)||(e.email=r),r}),h("blur",function(){return e.checkEmail()}),a()(),n(23,"div",8)(24,"label",15),m(25,"Senha"),a(),n(26,"p-password",16),f("ngModelChange",function(r){return c(e.password,r)||(e.password=r),r}),h("blur",function(){return e.validatePassword()}),a()(),n(27,"div",8)(28,"label",17),m(29,"Telefone"),a(),n(30,"input",18),f("ngModelChange",function(r){return c(e.telephone,r)||(e.telephone=r),r}),h("blur",function(){return e.checkTelephone()}),a()(),n(31,"button",19),h("click",function(){return e.createAccount()}),a()()()()()(),y(32,"p-toast"),T(33,J,3,0,"div",20)),o&2&&(d(14),p("ngModel",e.name),d(4),p("ngModel",e.username),u("ngClass",g(11,C,e.usernameTouched&&!e.usernameExists,e.usernameTouched&&(e.usernameExists||!e.username))),d(4),p("ngModel",e.email),u("ngClass",g(14,C,e.emailTouched&&e.isEmailValid,e.emailTouched&&!e.isEmailValid)),d(4),p("ngModel",e.password),u("toggleMask",!0)("ngClass",g(17,C,e.passwordTouched&&e.isPasswordStrong,e.passwordTouched&&!e.isPasswordStrong)),d(4),p("ngModel",e.telephone),u("ngClass",g(20,C,e.telephoneTouched&&e.isPhoneValid,e.telephoneTouched&&!e.isPhoneValid)),d(3),u("ngIf",e.isLoading))},dependencies:[P,k,L,W,j,F,X,V,D,R],styles:[".valid-field[_ngcontent-%COMP%]{border:2px solid green}.invalid-field[_ngcontent-%COMP%]{border:2px solid red}.loading-overlay[_ngcontent-%COMP%]{position:fixed;top:0;left:0;width:100vw;height:100vh;background:#00000080;color:#fff;display:flex;align-items:center;justify-content:center;font-size:1.5rem;z-index:1000}"]});let s=t;return s})();var H=(()=>{let t=class t{};t.\u0275fac=function(o){return new(o||t)},t.\u0275mod=w({type:t}),t.\u0275inj=E({imports:[_.forChild([{path:"",component:G}]),_]});let s=t;return s})();var K={validation:!0},_e=(()=>{let t=class t{};t.\u0275fac=function(o){return new(o||t)},t.\u0275mod=w({type:t}),t.\u0275inj=E({providers:[Z(K)],imports:[x,H,I,z,B,N,O]});let s=t;return s})();export{_e as CreateAccountModule};
