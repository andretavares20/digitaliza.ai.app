import{a as be,b as ge}from"./chunk-AVMZ2IGY.js";import{a as pe,b as de}from"./chunk-3FQVB4EG.js";import{a as fe,b as _e}from"./chunk-6WO54PXY.js";import{a as ce,b as ue}from"./chunk-7SHTSAL4.js";import"./chunk-XGEUYMKV.js";import{a as q}from"./chunk-E6LOM6XZ.js";import"./chunk-XDEFSFLT.js";import{a as ee,k as te}from"./chunk-B75OILI4.js";import"./chunk-BQIBU3NG.js";import"./chunk-SDIXMD6F.js";import{b as ie}from"./chunk-GTAELO3W.js";import"./chunk-BIWERCN5.js";import"./chunk-G6DIKXYU.js";import"./chunk-IWB2Y4TF.js";import"./chunk-6GWC5LVX.js";import{b as me}from"./chunk-CNPNJMPW.js";import"./chunk-DL3XPEUQ.js";import{b as ne,d as oe,f as re,g as se}from"./chunk-Z3LCZ5TE.js";import{b as le}from"./chunk-LAD3SHIR.js";import{b as ae}from"./chunk-4T3B6NP4.js";import"./chunk-ZTCSPVOJ.js";import{b as Q}from"./chunk-F5OVVOZJ.js";import{g as X,j as Z}from"./chunk-AGA6BFFJ.js";import"./chunk-INAI32N2.js";import"./chunk-N5J5HLCG.js";import"./chunk-7TI6GSZW.js";import"./chunk-XWWUT5GT.js";import{b as Y}from"./chunk-B5EANUUN.js";import"./chunk-6GBGRAQQ.js";import"./chunk-3MEDRUIT.js";import"./chunk-5CCLHAAD.js";import"./chunk-IVI3XLNH.js";import"./chunk-KQVLJ4TH.js";import"./chunk-4DSTCYQZ.js";import{i as K}from"./chunk-LKAC5SOC.js";import"./chunk-XSSXK7EZ.js";import{i as H,k as J}from"./chunk-OS55RPVL.js";import{e as w,i as $,o as G}from"./chunk-ZANQR5YZ.js";import{$a as B,Ca as r,Da as o,Ea as P,Eb as R,Fb as U,Gb as L,Ia as h,Ja as g,K as x,Ka as d,Lb as A,Mb as W,Na as F,O as V,Ob as z,P as y,U as f,Ua as s,V as _,Va as u,Ya as O,Za as D,_a as T,bb as C,da as E,eb as j,ec as k,f as Ce,ha as m,ia as v,lb as b,nb as S,ta as c,va as p,ya as I}from"./chunk-NR2BOPV4.js";var he=Ce(be());var Se=()=>({width:"600px"}),we=(t,i,e)=>({"status-pendente":t,"status-em-andamento":i,"status-concluido":e}),Me=()=>({width:"850px",height:"600px"}),Ee=()=>({"max-width":"850px","max-height":"600px",overflow:"hidden"});function Ie(t,i){t&1&&(r(0,"tr")(1,"th"),s(2,"Imagem"),o(),r(3,"th"),s(4,"Status"),o(),r(5,"th"),s(6,"Detalhes"),o(),r(7,"th"),s(8,"Forma de Pagamento"),o(),r(9,"th"),s(10,"Valor"),o(),r(11,"th"),s(12,"Data do Pedido"),o(),r(13,"th"),s(14,"Data de Entrega"),o(),r(15,"th"),s(16,"A\xE7\xF5es"),o()())}function Pe(t,i){if(t&1){let e=h();r(0,"img",14),g("click",function(){f(e);let n=d().$implicit,l=d();return _(l.openCarousel(n))}),o()}if(t&2){let e=d().$implicit;F("alt",e.files[0]==null?null:e.files[0].fileName),p("src",e.files[0]==null?null:e.files[0].fileUrl,E)}}function Oe(t,i){if(t&1){let e=h();r(0,"button",15),g("click",function(){f(e);let n=d().$implicit,l=d();return _(l.confirmDownloadResult(n))}),o()}}function De(t,i){if(t&1){let e=h();r(0,"tr")(1,"td"),c(2,Pe,1,2,"img",10),o(),r(3,"td")(4,"span",11),s(5),o()(),r(6,"td")(7,"button",12),g("click",function(){let n=f(e).$implicit,l=d();return _(l.openOrderDetails(n))}),o()(),r(8,"td"),s(9),o(),r(10,"td"),s(11),b(12,"currency"),o(),r(13,"td"),s(14),b(15,"date"),o(),r(16,"td"),s(17),b(18,"date"),o(),r(19,"td"),c(20,Oe,1,0,"button",13),o()()}if(t&2){let e=i.$implicit;m(2),p("ngIf",e.files.length>0),m(2),p("ngClass",j(17,we,e.status==="PENDENTE",e.status==="EM_ANDAMENTO",e.status==="CONCLUIDO")),m(),u(e.status),m(4),u(e.paymentMethod),m(2),u(S(12,8,e.totalValue,"BRL")),m(3),u(S(15,11,e.orderDate,"dd/MM/yyyy")),m(3),u(e.deliveryDate?S(18,14,e.deliveryDate,"dd/MM/yyyy"):"Pendente"),m(3),p("ngIf",e.status==="CONCLUIDO")}}function Te(t,i){t&1&&(r(0,"tr")(1,"td",16),s(2,"Nenhum pedido encontrado."),o()())}function ke(t,i){if(t&1&&(r(0,"li"),s(1),o()),t&2){let e=i.$implicit;m(),u(e.name)}}function Ne(t,i){if(t&1&&(r(0,"div")(1,"h6"),s(2),o(),r(3,"ul"),c(4,ke,2,1,"li",17),o()()),t&2){let e=i.$implicit;m(2),u(e.fileName),m(2),p("ngForOf",e.services)}}function Ve(t,i){if(t&1&&(r(0,"div")(1,"h5"),s(2,"Servi\xE7os solicitados:"),o(),c(3,Ne,5,2,"div",17),o()),t&2){let e=d();m(3),p("ngForOf",e.selectedOrder.files)}}function Fe(t,i){if(t&1&&P(0,"img",22),t&2){let e=i.$implicit;p("src",e.previewImageSrc,E)("alt",e.alt)}}function Be(t,i){if(t&1){let e=h();r(0,"div",18),g("click",function(){f(e);let n=d();return _(n.closeCarousel())}),r(1,"div",19),g("click",function(n){return f(e),_(n.stopPropagation())}),r(2,"p-galleria",20),T("visibleChange",function(n){f(e);let l=d();return D(l.displayCarousel,n)||(l.displayCarousel=n),_(n)}),c(3,Fe,1,2,"ng-template",21),o()()()}if(t&2){let e=d();m(2),I(C(8,Me)),O("visible",e.displayCarousel),p("value",e.carouselImages)("showItemNavigators",!0)("showThumbnails",!0)("responsiveOptions",e.responsiveOptions)("containerStyle",C(9,Ee))}}var xe=(()=>{let i=class i{constructor(a,n,l,N){this.pedidoService=a,this.messageService=n,this.authService=l,this.confirmationService=N,this.orders=[],this.displayCarousel=!1,this.displayOrderDetails=!1,this.carouselImages=[],this.responsiveOptions=[{breakpoint:"1024px",numVisible:5},{breakpoint:"768px",numVisible:3},{breakpoint:"560px",numVisible:1}]}ngOnInit(){this.loadOrders()}loadOrders(){let a=this.authService.getUserId();if(a){let n=Number(a);this.pedidoService.getOrdersByCliente(n).subscribe(l=>{this.orders=l},l=>{this.messageService.add({severity:"error",summary:"Erro",detail:"Erro ao carregar pedidos."})})}else this.messageService.add({severity:"error",summary:"Erro",detail:"Cliente n\xE3o autenticado."})}confirmDownloadResult(a){this.confirmationService.confirm({message:`Deseja baixar o resultado do pedido ${a.id}?`,header:"Confirma\xE7\xE3o",icon:"pi pi-exclamation-triangle",accept:()=>{this.downloadResult(a)}})}downloadResult(a){this.pedidoService.downloadOrderResult(a.id).subscribe(n=>{let l=new Blob([n],{type:"application/octet-stream"});(0,he.saveAs)(l,"resultado_"+a.id+".pdf"),this.messageService.add({severity:"success",summary:"Sucesso",detail:"Resultado baixado com sucesso."})},n=>{this.messageService.add({severity:"error",summary:"Erro",detail:"Erro ao baixar o resultado do pedido."})})}openCarousel(a){this.carouselImages=a.files.map(n=>({previewImageSrc:n.fileUrl,alt:n.fileName,title:n.fileName})),this.displayCarousel=!0,document.body.classList.add("carousel-modal-open")}closeCarousel(){this.displayCarousel=!1,document.body.classList.remove("carousel-modal-open")}openOrderDetails(a){this.selectedOrder=a,this.displayOrderDetails=!0}};i.\u0275fac=function(n){return new(n||i)(v(ge),v($),v(q),v(w))},i.\u0275cmp=V({type:i,selectors:[["app-painel"]],features:[B([w])],decls:13,vars:11,consts:[[1,"grid"],[1,"col-12"],[1,"card"],["responsiveLayout","scroll",3,"value","rows","paginator"],["pTemplate","header"],["pTemplate","body"],["pTemplate","emptymessage"],["header","Detalhes do Pedido",3,"visibleChange","visible","modal","dismissableMask"],[4,"ngIf"],["class","carousel-overlay",3,"click",4,"ngIf"],["class","thumbnail","style","cursor: pointer;",3,"src","alt","click",4,"ngIf"],[1,"status-badge",3,"ngClass"],["pButton","","type","button","label","Ver Detalhes","icon","pi pi-info-circle",3,"click"],["pButton","","type","button","label","Baixar Resultado","icon","pi pi-download",3,"click",4,"ngIf"],[1,"thumbnail",2,"cursor","pointer",3,"click","src","alt"],["pButton","","type","button","label","Baixar Resultado","icon","pi pi-download",3,"click"],["colspan","8"],[4,"ngFor","ngForOf"],[1,"carousel-overlay",3,"click"],[1,"carousel-container",3,"click"],[3,"visibleChange","visible","value","showItemNavigators","showThumbnails","responsiveOptions","containerStyle"],["pTemplate","item"],[2,"width","100%","height","100%","object-fit","contain",3,"src","alt"]],template:function(n,l){n&1&&(r(0,"div",0)(1,"div",1)(2,"div",2)(3,"h5"),s(4,"Vis\xE3o Geral dos Pedidos"),o(),r(5,"p-table",3),c(6,Ie,17,0,"ng-template",4)(7,De,21,21,"ng-template",5)(8,Te,3,0,"ng-template",6),o(),r(9,"p-dialog",7),T("visibleChange",function(M){return D(l.displayOrderDetails,M)||(l.displayOrderDetails=M),M}),c(10,Ve,4,1,"div",8),o(),c(11,Be,4,10,"div",9),o()(),P(12,"p-confirmDialog"),o()),n&2&&(m(5),p("value",l.orders)("rows",10)("paginator",!0),m(4),I(C(10,Se)),O("visible",l.displayOrderDetails),p("modal",!0)("dismissableMask",!0),m(),p("ngIf",l.selectedOrder),m(),p("ngIf",l.displayCarousel))},dependencies:[R,U,L,G,H,ee,ce,pe,fe,W,A],styles:['@charset "UTF-8";.carousel-overlay[_ngcontent-%COMP%]{position:fixed;top:0;left:0;width:100vw;height:100vh;background-color:#000c;display:flex;justify-content:center;align-items:center;z-index:1000}.carousel-container[_ngcontent-%COMP%]{width:850px;height:600px;background-color:#fff;display:flex;justify-content:center;align-items:center;position:relative;z-index:1001;overflow:hidden}.carousel-container[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{max-width:100%;max-height:100%;object-fit:contain}.p-galleria-item-next[_ngcontent-%COMP%], .p-galleria-item-prev[_ngcontent-%COMP%]{z-index:1002}.thumbnail[_ngcontent-%COMP%]{max-width:100px;max-height:100px;cursor:pointer;border-radius:5px;transition:transform .3s ease}.thumbnail[_ngcontent-%COMP%]:hover{transform:scale(1.05);box-shadow:0 4px 8px #0003}body.carousel-modal-open[_ngcontent-%COMP%]{overflow:hidden}']});let t=i;return t})();var ye=(()=>{let i=class i{};i.\u0275fac=function(n){return new(n||i)},i.\u0275mod=y({type:i}),i.\u0275inj=x({imports:[k.forChild([{path:"",component:xe}]),k]});let t=i;return t})();var xt=(()=>{let i=class i{};i.\u0275fac=function(n){return new(n||i)},i.\u0275mod=y({type:i}),i.\u0275inj=x({imports:[z,K,ye,ne,Q,oe,X,re,Z,se,ae,le,Y,te,J,ue,ie,me,de,_e]});let t=i;return t})();export{xt as PainelModule};
