import{a as U,b as O}from"./chunk-BK52BINW.js";import{a as D}from"./chunk-HA2EIDMI.js";import{a as X,b as L}from"./chunk-CHVYWF5D.js";import"./chunk-VV2CGQPP.js";import{a as z,b as B}from"./chunk-MKB7KLW2.js";import"./chunk-XQA3FTOI.js";import"./chunk-XDEFSFLT.js";import"./chunk-7IUY3HME.js";import{a as F,b as I}from"./chunk-QIKBV2MJ.js";import"./chunk-HTTFB544.js";import"./chunk-POQXMLX6.js";import"./chunk-WAACE3S3.js";import{b as V,e as N,f as W,i as j}from"./chunk-P7PTI55Z.js";import"./chunk-XSSXK7EZ.js";import{i as x,k as A}from"./chunk-GWROTBBW.js";import{i as v}from"./chunk-W3XEXHXD.js";import{$a as p,Ea as n,Fa as s,Ga as y,Gb as S,La as u,M as E,Q as T,Qb as P,R as w,Wa as m,_a as h,ab as c,bb as _,dc as k,fb as g,gc as M,ja as d,ka as b,xa as f}from"./chunk-3BCS6XGD.js";var C=(a,t)=>({"valid-field":a,"invalid-field":t}),R=(()=>{let t=class t{constructor(i,o,e){this.userService=i,this.router=o,this.messageService=e,this.usernameExists=!1,this.isEmailValid=!0,this.isPasswordStrong=!0,this.isPhoneValid=!0,this.usernameTouched=!1,this.emailTouched=!1,this.passwordTouched=!1,this.telephoneTouched=!1}createAccount(){if(this.validatePassword(),this.validateEmail(),this.validateTelephone(),this.checkUsername(),!this.isFormValid()){this.showError("Erro","Por favor, corrija os erros antes de continuar.");return}let i={name:this.name,username:this.username,email:this.email,password:this.password,telephone:this.telephone};this.userService.register(i).subscribe(o=>{console.log("Account created successfully",o),this.router.navigate(["/auth/login"])},o=>{this.showError("Erro","Erro ao criar a conta. Por favor, tente novamente."),console.error("Error creating account",o)})}checkUsername(){if(this.usernameTouched=!0,!this.username||this.username.trim()===""){this.usernameExists=!0,this.showError("Erro","Nome de usu\xE1rio n\xE3o pode ser vazio.");return}this.userService.checkUsernameAvailability(this.username).subscribe(i=>{this.usernameExists=!i,this.usernameExists&&this.showError("Erro","Nome de usu\xE1rio j\xE1 est\xE1 em uso.")},i=>{this.showError("Erro","Erro ao verificar a disponibilidade do nome de usu\xE1rio."),console.error("Error checking username availability",i)})}checkEmail(){if(this.emailTouched=!0,!this.email||this.email.trim()===""){this.isEmailValid=!1,this.showError("Erro","O email n\xE3o pode ser vazio.");return}this.userService.checkEmailAvailability(this.email).subscribe(i=>{this.isEmailValid=i,this.isEmailValid||this.showError("Erro","O email j\xE1 est\xE1 em uso.")},i=>{this.showError("Erro","Erro ao verificar a disponibilidade do email."),console.error("Error checking email availability",i)})}checkTelephone(){if(this.telephoneTouched=!0,!this.telephone||this.telephone.trim()===""){this.isPhoneValid=!1,this.showError("Erro","O telefone n\xE3o pode ser vazio.");return}this.userService.checkTelephoneAvailability(this.telephone).subscribe(i=>{this.isPhoneValid=i,this.isPhoneValid||this.showError("Erro","O telefone j\xE1 est\xE1 em uso.")},i=>{this.showError("Erro","Erro ao verificar a disponibilidade do telefone."),console.error("Error checking telephone availability",i)})}validateEmail(){this.emailTouched=!0;let i=/^[a-zA-Z0-9._-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,4}$/;this.isEmailValid=i.test(this.email),this.isEmailValid||this.showError("Erro","Email inv\xE1lido.")}validatePassword(){this.passwordTouched=!0;let i=/^(?=.*[a-z])(?=.*[A-Z])(?=.*\d)(?=.*[@$!%*?&])[A-Za-z\d@$!%*?&]{8,}$/;this.isPasswordStrong=i.test(this.password),this.isPasswordStrong||this.showError("Erro","Senha fraca. Deve ter pelo menos 8 caracteres, incluindo mai\xFAsculas, min\xFAsculas, n\xFAmeros e caracteres especiais.")}validateTelephone(){this.telephoneTouched=!0;let i=this.telephone;this.telephone.length===11&&(i=`(${this.telephone.slice(0,2)}) ${this.telephone.slice(2,7)}-${this.telephone.slice(7)}`),console.log(i);let o=/^\(\d{2}\)\s\d{4,5}-\d{4}$/;this.isPhoneValid=o.test(i),this.isPhoneValid||this.showError("Erro","Telefone inv\xE1lido. Use o formato (XX) XXXXX-XXXX.")}isFormValid(){return!this.usernameExists&&this.isEmailValid&&this.isPasswordStrong&&this.isPhoneValid}showError(i,o){this.messageService.add({severity:"error",summary:i,detail:o})}};t.\u0275fac=function(o){return new(o||t)(b(D),b(k),b(v))},t.\u0275cmp=T({type:t,selectors:[["app-create-account"]],features:[_([v])],decls:33,vars:22,consts:[[1,"surface-ground","flex","align-items-center","justify-content-center","min-h-screen","min-w-screen","overflow-hidden"],[1,"flex","flex-column","align-items-center","justify-content-center"],["src","assets/logo digitalize2.png","alt","Logo",1,"mb-5","w-6rem","flex-shrink-0"],[2,"border-radius","56px","padding","0.3rem","background",`linear-gradient(
                    180deg,
                    var(--primary-color) 10%,
                    rgba(33, 150, 243, 0) 30%
                )`],[1,"w-full","surface-card","py-8","px-5","sm:px-8",2,"border-radius","53px"],[1,"text-center","mb-5"],[1,"text-900","text-3xl","font-medium","mb-3"],[1,"text-600","font-medium"],[1,"field"],["for","name",1,"block","text-900","text-xl","font-medium","mb-2"],["id","name","type","text","placeholder","Nome completo","pInputText","",1,"w-full","md:w-30rem","mb-5",2,"padding","1rem",3,"ngModelChange","ngModel"],["for","username",1,"block","text-900","text-xl","font-medium","mb-2"],["id","username","type","text","placeholder","Nome de usu\xE1rio","pInputText","",1,"w-full","md:w-30rem","mb-5",2,"padding","1rem",3,"ngModelChange","blur","ngModel","ngClass"],["for","email",1,"block","text-900","text-xl","font-medium","mb-2"],["id","email","type","text","placeholder","Endere\xE7o de email","pInputText","",1,"w-full","md:w-30rem","mb-5",2,"padding","1rem",3,"ngModelChange","blur","ngModel","ngClass"],["for","password",1,"block","text-900","font-medium","text-xl","mb-2"],["id","password","placeholder","Senha","styleClass","mb-5","inputStyleClass","w-full p-3 md:w-30rem","promptLabel","Digite uma senha","weakLabel","Fraca","mediumLabel","M\xE9dia","strongLabel","Forte",3,"ngModelChange","blur","ngModel","toggleMask","ngClass"],["for","phone",1,"block","text-900","text-xl","font-medium","mb-2"],["id","phone","type","text","placeholder","Telefone para contato","pInputText","","mask","(00) 00000-0000",1,"w-full","md:w-30rem","mb-5",2,"padding","1rem",3,"ngModelChange","blur","ngModel","ngClass"],["pButton","","pRipple","","label","Criar Conta",1,"w-full","p-3","text-xl",3,"click"]],template:function(o,e){o&1&&(n(0,"div",0)(1,"div",1),y(2,"img",2),n(3,"div",3)(4,"div",4)(5,"div",5)(6,"div",6),m(7," Criar Conta "),s(),n(8,"span",7),m(9,"Preencha os dados para criar uma conta"),s()(),n(10,"div")(11,"div",8)(12,"label",9),m(13,"Nome Completo"),s(),n(14,"input",10),c("ngModelChange",function(r){return p(e.name,r)||(e.name=r),r}),s()(),n(15,"div",8)(16,"label",11),m(17,"Nome de Usu\xE1rio"),s(),n(18,"input",12),c("ngModelChange",function(r){return p(e.username,r)||(e.username=r),r}),u("blur",function(){return e.checkUsername()}),s()(),n(19,"div",8)(20,"label",13),m(21,"Email"),s(),n(22,"input",14),c("ngModelChange",function(r){return p(e.email,r)||(e.email=r),r}),u("blur",function(){return e.checkEmail()}),s()(),n(23,"div",8)(24,"label",15),m(25,"Senha"),s(),n(26,"p-password",16),c("ngModelChange",function(r){return p(e.password,r)||(e.password=r),r}),u("blur",function(){return e.validatePassword()}),s()(),n(27,"div",8)(28,"label",17),m(29,"Telefone"),s(),n(30,"input",18),c("ngModelChange",function(r){return p(e.telephone,r)||(e.telephone=r),r}),u("blur",function(){return e.checkTelephone()}),s()(),n(31,"button",19),u("click",function(){return e.createAccount()}),s()()()()()(),y(32,"p-toast")),o&2&&(d(14),h("ngModel",e.name),d(4),h("ngModel",e.username),f("ngClass",g(10,C,e.usernameTouched&&!e.usernameExists,e.usernameTouched&&(e.usernameExists||!e.username))),d(4),h("ngModel",e.email),f("ngClass",g(13,C,e.emailTouched&&e.isEmailValid,e.emailTouched&&!e.isEmailValid)),d(4),h("ngModel",e.password),f("toggleMask",!0)("ngClass",g(16,C,e.passwordTouched&&e.isPasswordStrong,e.passwordTouched&&!e.isPasswordStrong)),d(4),h("ngModel",e.telephone),f("ngClass",g(19,C,e.telephoneTouched&&e.isPhoneValid,e.telephoneTouched&&!e.isPhoneValid)))},dependencies:[S,V,N,W,F,X,x,z,O],styles:[".valid-field[_ngcontent-%COMP%]{border:2px solid green}.invalid-field[_ngcontent-%COMP%]{border:2px solid red}"]});let a=t;return a})();var q=(()=>{let t=class t{};t.\u0275fac=function(o){return new(o||t)},t.\u0275mod=w({type:t}),t.\u0275inj=E({imports:[M.forChild([{path:"",component:R}]),M]});let a=t;return a})();var G={validation:!0},ve=(()=>{let t=class t{};t.\u0275fac=function(o){return new(o||t)},t.\u0275mod=w({type:t}),t.\u0275inj=E({providers:[U(G)],imports:[P,q,j,I,L,A,B]});let a=t;return a})();export{ve as CreateAccountModule};
