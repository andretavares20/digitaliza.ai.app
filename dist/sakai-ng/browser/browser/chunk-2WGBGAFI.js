import{a as Ee,b as H}from"./chunk-T47GYVAA.js";import{a as Le,b as N}from"./chunk-WW5DZKQB.js";import{a as A}from"./chunk-XKJ3NAA3.js";import{a as P}from"./chunk-F7RNTJJK.js";import{a as O,c as Ie,d as Te,e as Ue,i as we,j as Se,k as j}from"./chunk-DPFCPVSA.js";import{b as xe,l as Fe,o as ye,p as z,q as T}from"./chunk-VISTKU2Y.js";import{Ca as x,Eb as _e,Fa as c,Ga as d,Ha as f,Hb as ue,Ia as F,Ib as me,Ja as y,Jb as fe,Ka as U,La as C,Ma as v,Mb as he,N as q,Na as s,Nb as ge,R as M,Rb as ve,S as W,Sa as ne,Sb as R,Ta as V,Ua as w,Ub as B,Va as S,Vb as be,Wa as ae,X as u,Xa as E,Y as m,Ya as L,Z as $,_ as Z,ac as Ce,ba as K,ca as h,da as G,db as le,ga as Y,gb as oe,ib as se,jb as re,ka as l,la as b,mb as pe,oa as J,qa as X,sb as ce,ua as ee,va as te,vb as de,wa as p,xa as _,xb as I,ya as a,yb as D,za as ie}from"./chunk-OQCQAMD7.js";var Q=(()=>{class t extends Ue{pathId;ngOnInit(){this.pathId="url(#"+xe()+")"}static \u0275fac=(()=>{let e;return function(n){return(e||(e=Z(t)))(n||t)}})();static \u0275cmp=M({type:t,selectors:[["UploadIcon"]],standalone:!0,features:[ee,le],decls:6,vars:7,consts:[["width","14","height","14","viewBox","0 0 14 14","fill","none","xmlns","http://www.w3.org/2000/svg"],["fill-rule","evenodd","clip-rule","evenodd","d","M6.58942 9.82197C6.70165 9.93405 6.85328 9.99793 7.012 10C7.17071 9.99793 7.32234 9.93405 7.43458 9.82197C7.54681 9.7099 7.61079 9.55849 7.61286 9.4V2.04798L9.79204 4.22402C9.84752 4.28011 9.91365 4.32457 9.98657 4.35479C10.0595 4.38502 10.1377 4.40039 10.2167 4.40002C10.2956 4.40039 10.3738 4.38502 10.4467 4.35479C10.5197 4.32457 10.5858 4.28011 10.6413 4.22402C10.7538 4.11152 10.817 3.95902 10.817 3.80002C10.817 3.64102 10.7538 3.48852 10.6413 3.37602L7.45127 0.190618C7.44656 0.185584 7.44176 0.180622 7.43687 0.175736C7.32419 0.063214 7.17136 0 7.012 0C6.85264 0 6.69981 0.063214 6.58712 0.175736C6.58181 0.181045 6.5766 0.186443 6.5715 0.191927L3.38282 3.37602C3.27669 3.48976 3.2189 3.6402 3.22165 3.79564C3.2244 3.95108 3.28746 4.09939 3.39755 4.20932C3.50764 4.31925 3.65616 4.38222 3.81182 4.38496C3.96749 4.3877 4.11814 4.33001 4.23204 4.22402L6.41113 2.04807V9.4C6.41321 9.55849 6.47718 9.7099 6.58942 9.82197ZM11.9952 14H2.02883C1.751 13.9887 1.47813 13.9228 1.22584 13.8061C0.973545 13.6894 0.746779 13.5241 0.558517 13.3197C0.370254 13.1154 0.22419 12.876 0.128681 12.6152C0.0331723 12.3545 -0.00990605 12.0775 0.0019109 11.8V9.40005C0.0019109 9.24092 0.065216 9.08831 0.1779 8.97579C0.290584 8.86326 0.443416 8.80005 0.602775 8.80005C0.762134 8.80005 0.914966 8.86326 1.02765 8.97579C1.14033 9.08831 1.20364 9.24092 1.20364 9.40005V11.8C1.18295 12.0376 1.25463 12.274 1.40379 12.4602C1.55296 12.6463 1.76817 12.7681 2.00479 12.8H11.9952C12.2318 12.7681 12.447 12.6463 12.5962 12.4602C12.7453 12.274 12.817 12.0376 12.7963 11.8V9.40005C12.7963 9.24092 12.8596 9.08831 12.9723 8.97579C13.085 8.86326 13.2378 8.80005 13.3972 8.80005C13.5565 8.80005 13.7094 8.86326 13.8221 8.97579C13.9347 9.08831 13.998 9.24092 13.998 9.40005V11.8C14.022 12.3563 13.8251 12.8996 13.45 13.3116C13.0749 13.7236 12.552 13.971 11.9952 14Z","fill","currentColor"],[3,"id"],["width","14","height","14","fill","white"]],template:function(i,n){i&1&&($(),c(0,"svg",0)(1,"g"),f(2,"path",1),d(),c(3,"defs")(4,"clipPath",2),f(5,"rect",3),d()()()),i&2&&(x(n.getClassNames()),_("aria-label",n.ariaLabel)("aria-hidden",n.ariaHidden)("role",n.role),l(),_("clip-path",n.pathId),l(3),a("id",n.pathId))},encapsulation:2})}return t})();var Be=["advancedfileinput"],Oe=["basicfileinput"],Re=["content"],ze=(t,o,e,i,n)=>({$implicit:t,uploadedFiles:o,chooseCallback:e,clearCallback:i,uploadCallback:n}),Pe=(t,o,e,i,n,r,g,k)=>({$implicit:t,uploadedFiles:o,chooseCallback:e,clearCallback:i,removeUploadedFileCallback:n,removeFileCallback:r,progress:g,messages:k}),je=(t,o)=>({"p-focus":t,"p-disabled":o}),Ae=(t,o,e,i)=>({"p-button p-component p-fileupload-choose":!0,"p-button-icon-only":t,"p-fileupload-choose-selected":o,"p-focus":e,"p-disabled":i});function He(t,o){if(t&1&&f(0,"span",21),t&2){let e=s(3);x(e.chooseIcon),a("ngClass","p-button-icon p-button-icon-left"),_("aria-label",!0)("data-pc-section","chooseicon")}}function Ne(t,o){t&1&&f(0,"PlusIcon",24),t&2&&(a("styleClass","p-button-icon p-button-icon-left"),_("aria-label",!0)("data-pc-section","chooseicon"))}function Qe(t,o){}function qe(t,o){t&1&&p(0,Qe,0,0,"ng-template")}function We(t,o){if(t&1&&(c(0,"span",25),p(1,qe,1,0,null,11),d()),t&2){let e=s(4);_("aria-label",!0)("data-pc-section","chooseicon"),l(),a("ngTemplateOutlet",e.chooseIconTemplate)}}function $e(t,o){if(t&1&&(F(0),p(1,Ne,1,3,"PlusIcon",22)(2,We,2,3,"span",23),y()),t&2){let e=s(3);l(),a("ngIf",!e.chooseIconTemplate),l(),a("ngIf",e.chooseIconTemplate)}}function Ze(t,o){if(t&1&&f(0,"span",28),t&2){let e=s(4);a("ngClass",e.uploadIcon),_("aria-hidden",!0)}}function Ke(t,o){t&1&&f(0,"UploadIcon",24),t&2&&a("styleClass","p-button-icon p-button-icon-left")}function Ge(t,o){}function Ye(t,o){t&1&&p(0,Ge,0,0,"ng-template")}function Je(t,o){if(t&1&&(c(0,"span",25),p(1,Ye,1,0,null,11),d()),t&2){let e=s(5);_("aria-hidden",!0),l(),a("ngTemplateOutlet",e.uploadIconTemplate)}}function Xe(t,o){if(t&1&&(F(0),p(1,Ke,1,1,"UploadIcon",22)(2,Je,2,2,"span",23),y()),t&2){let e=s(4);l(),a("ngIf",!e.uploadIconTemplate),l(),a("ngIf",e.uploadIconTemplate)}}function et(t,o){if(t&1){let e=C();c(0,"p-button",26),v("onClick",function(){u(e);let n=s(3);return m(n.upload())}),p(1,Ze,1,2,"span",27)(2,Xe,3,2,"ng-container",9),d()}if(t&2){let e=s(3);a("label",e.uploadButtonLabel)("disabled",!e.hasFiles()||e.isFileLimitExceeded())("styleClass",e.uploadStyleClass),l(),a("ngIf",e.uploadIcon),l(),a("ngIf",!e.uploadIcon)}}function tt(t,o){if(t&1&&f(0,"span",28),t&2){let e=s(4);a("ngClass",e.cancelIcon)}}function it(t,o){t&1&&f(0,"TimesIcon",24),t&2&&(a("styleClass","p-button-icon p-button-icon-left"),_("aria-hidden",!0))}function nt(t,o){}function at(t,o){t&1&&p(0,nt,0,0,"ng-template")}function lt(t,o){if(t&1&&(c(0,"span",25),p(1,at,1,0,null,11),d()),t&2){let e=s(5);_("aria-hidden",!0),l(),a("ngTemplateOutlet",e.cancelIconTemplate)}}function ot(t,o){if(t&1&&(F(0),p(1,it,1,2,"TimesIcon",22)(2,lt,2,2,"span",23),y()),t&2){let e=s(4);l(),a("ngIf",!e.cancelIconTemplate),l(),a("ngIf",e.cancelIconTemplate)}}function st(t,o){if(t&1){let e=C();c(0,"p-button",26),v("onClick",function(){u(e);let n=s(3);return m(n.clear())}),p(1,tt,1,1,"span",27)(2,ot,3,2,"ng-container",9),d()}if(t&2){let e=s(3);a("label",e.cancelButtonLabel)("disabled",!e.hasFiles()||e.uploading)("styleClass",e.cancelStyleClass),l(),a("ngIf",e.cancelIcon),l(),a("ngIf",!e.cancelIcon)}}function rt(t,o){if(t&1){let e=C();F(0),c(1,"span",17),v("focus",function(){u(e);let n=s(2);return m(n.onFocus())})("blur",function(){u(e);let n=s(2);return m(n.onBlur())})("click",function(){u(e);let n=s(2);return m(n.choose())})("keydown.enter",function(){u(e);let n=s(2);return m(n.choose())}),c(2,"input",7,0),v("change",function(n){u(e);let r=s(2);return m(r.onFileSelect(n))}),d(),p(4,He,1,5,"span",18)(5,$e,3,2,"ng-container",9),c(6,"span",19),E(7),d()(),p(8,et,3,5,"p-button",20)(9,st,3,5,"p-button",20),y()}if(t&2){let e=s(2);l(),x(e.chooseStyleClass),a("ngClass",oe(16,je,e.focus,e.disabled||e.isChooseDisabled())),_("data-pc-section","choosebutton"),l(),a("multiple",e.multiple)("accept",e.accept)("disabled",e.disabled||e.isChooseDisabled()),_("aria-label",e.browseFilesLabel)("title","")("data-pc-section","input"),l(2),a("ngIf",e.chooseIcon),l(),a("ngIf",!e.chooseIcon),l(),_("data-pc-section","choosebuttonlabel"),l(),L(e.chooseButtonLabel),l(),a("ngIf",!e.auto&&e.showUploadButton),l(),a("ngIf",!e.auto&&e.showCancelButton)}}function pt(t,o){t&1&&U(0)}function ct(t,o){t&1&&U(0)}function dt(t,o){if(t&1&&f(0,"p-progressBar",29),t&2){let e=s(2);a("value",e.progress)("showValue",!1)}}function _t(t,o){if(t&1){let e=C();c(0,"div")(1,"img",35),v("error",function(n){u(e);let r=s(5);return m(r.imageError(n))}),d()()}if(t&2){let e=s().$implicit,i=s(4);l(),a("src",e.objectURL,Y)("width",i.previewWidth)}}function ut(t,o){t&1&&f(0,"TimesIcon")}function mt(t,o){}function ft(t,o){t&1&&p(0,mt,0,0,"ng-template")}function ht(t,o){if(t&1){let e=C();c(0,"div",32),p(1,_t,2,2,"div",9),c(2,"div",33),E(3),d(),c(4,"div"),E(5),d(),c(6,"div")(7,"button",34),v("click",function(n){let r=u(e).index,g=s(4);return m(g.remove(n,r))}),p(8,ut,1,0,"TimesIcon",9)(9,ft,1,0,null,11),d()()()}if(t&2){let e=o.$implicit,i=s(4);l(),a("ngIf",i.isImage(e)),l(2),L(e.name),l(2),L(i.formatSize(e.size)),l(2),x(i.removeStyleClass),a("disabled",i.uploading),l(),a("ngIf",!i.cancelIconTemplate),l(),a("ngTemplateOutlet",i.cancelIconTemplate)}}function gt(t,o){if(t&1&&(c(0,"div"),p(1,ht,10,8,"div",31),d()),t&2){let e=s(3);l(),a("ngForOf",e.files)}}function vt(t,o){}function bt(t,o){if(t&1&&(c(0,"div"),p(1,vt,0,0,"ng-template",36),d()),t&2){let e=s(3);l(),a("ngForOf",e.files)("ngForTemplate",e.fileTemplate)}}function Ct(t,o){if(t&1&&(c(0,"div",30),p(1,gt,2,1,"div",9)(2,bt,2,2,"div",9),d()),t&2){let e=s(2);l(),a("ngIf",!e.fileTemplate),l(),a("ngIf",e.fileTemplate)}}function xt(t,o){t&1&&U(0)}function Ft(t,o){t&1&&U(0)}function yt(t,o){if(t&1&&(c(0,"div",37),p(1,Ft,1,0,"ng-container",11),d()),t&2){let e=s(2);l(),a("ngTemplateOutlet",e.emptyTemplate)}}function It(t,o){if(t&1){let e=C();c(0,"div",6)(1,"input",7,0),v("change",function(n){u(e);let r=s();return m(r.onFileSelect(n))}),d(),c(3,"div",8),p(4,rt,10,19,"ng-container",9)(5,pt,1,0,"ng-container",10)(6,ct,1,0,"ng-container",11),d(),c(7,"div",12,1),v("dragenter",function(n){u(e);let r=s();return m(r.onDragEnter(n))})("dragleave",function(n){u(e);let r=s();return m(r.onDragLeave(n))})("drop",function(n){u(e);let r=s();return m(r.onDrop(n))}),p(9,dt,1,2,"p-progressBar",13),f(10,"p-messages",14),p(11,Ct,3,2,"div",15)(12,xt,1,0,"ng-container",10)(13,yt,2,1,"div",16),d()()}if(t&2){let e=s();x(e.styleClass),a("ngClass","p-fileupload p-fileupload-advanced p-component")("ngStyle",e.style),_("data-pc-name","fileupload")("data-pc-section","root"),l(),ie("display","none"),a("multiple",e.multiple)("accept",e.accept)("disabled",e.disabled||e.isChooseDisabled()),_("aria-label",e.browseFilesLabel)("title","")("data-pc-section","input"),l(2),_("data-pc-section","buttonbar"),l(),a("ngIf",!e.headerTemplate),l(),a("ngTemplateOutlet",e.headerTemplate)("ngTemplateOutletContext",re(27,ze,e.files,e.uploadedFiles,e.choose.bind(e),e.clear.bind(e),e.upload.bind(e))),l(),a("ngTemplateOutlet",e.toolbarTemplate),l(),_("data-pc-section","content"),l(2),a("ngIf",e.hasFiles()),l(),a("value",e.msgs)("enableService",!1),l(),a("ngIf",e.hasFiles()),l(),a("ngTemplateOutlet",e.contentTemplate)("ngTemplateOutletContext",pe(33,Pe,e.files,e.uploadedFiles,e.choose.bind(e),e.clear.bind(e),e.removeUploadedFile.bind(e),e.remove.bind(e),e.progress,e.msgs)),l(),a("ngIf",e.emptyTemplate&&!e.hasFiles()&&!e.hasUploadedFiles())}}function Tt(t,o){if(t&1&&f(0,"span",28),t&2){let e=s(3);a("ngClass",e.uploadIcon)}}function Ut(t,o){t&1&&f(0,"UploadIcon",24),t&2&&a("styleClass","p-button-icon p-button-icon-left")}function wt(t,o){}function St(t,o){t&1&&p(0,wt,0,0,"ng-template")}function Et(t,o){if(t&1&&(c(0,"span",25),p(1,St,1,0,null,11),d()),t&2){let e=s(4);l(),a("ngTemplateOutlet",e.uploadIconTemplate)}}function Lt(t,o){if(t&1&&(F(0),p(1,Ut,1,1,"UploadIcon",22)(2,Et,2,1,"span",23),y()),t&2){let e=s(3);l(),a("ngIf",!e.uploadIconTemplate),l(),a("ngIf",e.uploadIconTemplate)}}function kt(t,o){if(t&1&&(F(0),p(1,Tt,1,1,"span",27)(2,Lt,3,2,"ng-container",9),y()),t&2){let e=s(2);l(),a("ngIf",e.uploadIcon),l(),a("ngIf",!e.uploadIcon)}}function Mt(t,o){if(t&1&&f(0,"span",44),t&2){let e=s(3);a("ngClass",e.chooseIcon)}}function Vt(t,o){t&1&&f(0,"PlusIcon",24),t&2&&(a("styleClass","p-button-icon p-button-icon-left pi"),_("aria-hidden",!0)("data-pc-section","uploadicon"))}function Dt(t,o){}function Bt(t,o){t&1&&p(0,Dt,0,0,"ng-template")}function Ot(t,o){if(t&1&&(c(0,"span",46),p(1,Bt,1,0,null,11),d()),t&2){let e=s(4);_("aria-hidden",!0)("data-pc-section","uploadicon"),l(),a("ngTemplateOutlet",e.chooseIconTemplate)}}function Rt(t,o){if(t&1&&(F(0),p(1,Vt,1,3,"PlusIcon",22)(2,Ot,2,3,"span",45),y()),t&2){let e=s(3);l(),a("ngIf",!e.chooseIconTemplate),l(),a("ngIf",e.chooseIconTemplate)}}function zt(t,o){if(t&1&&p(0,Mt,1,1,"span",43)(1,Rt,3,2,"ng-container",9),t&2){let e=s(2);a("ngIf",e.chooseIcon),l(),a("ngIf",!e.chooseIcon)}}function Pt(t,o){if(t&1&&(c(0,"span",19),E(1),d()),t&2){let e=s(2);_("data-pc-section","label"),l(),L(e.basicButtonLabel)}}function jt(t,o){if(t&1){let e=C();c(0,"input",47,3),v("change",function(n){u(e);let r=s(2);return m(r.onFileSelect(n))})("focus",function(){u(e);let n=s(2);return m(n.onFocus())})("blur",function(){u(e);let n=s(2);return m(n.onBlur())}),d()}if(t&2){let e=s(2);a("accept",e.accept)("multiple",e.multiple)("disabled",e.disabled),_("aria-label",e.browseFilesLabel)("data-pc-section","input")}}function At(t,o){if(t&1){let e=C();c(0,"div",38),f(1,"p-messages",14),c(2,"span",39),v("click",function(){u(e);let n=s();return m(n.onBasicUploaderClick())})("keydown",function(n){u(e);let r=s();return m(r.onBasicKeydown(n))}),p(3,kt,3,2,"ng-container",40)(4,zt,2,2,"ng-template",null,2,ce)(6,Pt,2,2,"span",41)(7,jt,2,5,"input",42),d()()}if(t&2){let e=ae(5),i=s();_("data-pc-name","fileupload"),l(),a("value",i.msgs)("enableService",!1),l(),x(i.styleClass),a("ngClass",se(12,Ae,!i.basicButtonLabel,i.hasFiles(),i.focus,i.disabled))("ngStyle",i.style),_("data-pc-section","choosebutton"),l(),a("ngIf",i.hasFiles()&&!i.auto)("ngIfElse",e),l(3),a("ngIf",i.basicButtonLabel),l(),a("ngIf",!i.hasFiles())}}var Ci=(()=>{class t{document;platformId;renderer;el;sanitizer;zone;http;cd;config;name;url;method="post";multiple;accept;disabled;auto;withCredentials;maxFileSize;invalidFileSizeMessageSummary="{0}: Invalid file size, ";invalidFileSizeMessageDetail="maximum upload size is {0}.";invalidFileTypeMessageSummary="{0}: Invalid file type, ";invalidFileTypeMessageDetail="allowed file types: {0}.";invalidFileLimitMessageDetail="limit is {0} at most.";invalidFileLimitMessageSummary="Maximum number of files exceeded, ";style;styleClass;previewWidth=50;chooseLabel;uploadLabel;cancelLabel;chooseIcon;uploadIcon;cancelIcon;showUploadButton=!0;showCancelButton=!0;mode="advanced";headers;customUpload;fileLimit;uploadStyleClass;cancelStyleClass;removeStyleClass;chooseStyleClass;onBeforeUpload=new h;onSend=new h;onUpload=new h;onError=new h;onClear=new h;onRemove=new h;onSelect=new h;onProgress=new h;uploadHandler=new h;onImageError=new h;onRemoveUploadedFile=new h;templates;advancedFileInput;basicFileInput;content;set files(e){this._files=[];for(let i=0;i<e.length;i++){let n=e[i];this.validate(n)&&(this.isImage(n)&&(n.objectURL=this.sanitizer.bypassSecurityTrustUrl(window.URL.createObjectURL(e[i]))),this._files.push(e[i]))}}get files(){return this._files}get basicButtonLabel(){return this.auto||!this.hasFiles()?this.chooseLabel:this.uploadLabel??this.files[0].name}_files=[];progress=0;dragHighlight;msgs;fileTemplate;headerTemplate;contentTemplate;toolbarTemplate;chooseIconTemplate;uploadIconTemplate;cancelIconTemplate;emptyTemplate;uploadedFileCount=0;focus;uploading;duplicateIEEvent;translationSubscription;dragOverListener;uploadedFiles=[];fileUploadSubcription;constructor(e,i,n,r,g,k,ke,Me,Ve){this.document=e,this.platformId=i,this.renderer=n,this.el=r,this.sanitizer=g,this.zone=k,this.http=ke,this.cd=Me,this.config=Ve}ngAfterContentInit(){this.templates?.forEach(e=>{switch(e.getType()){case"header":this.headerTemplate=e.template;break;case"file":this.fileTemplate=e.template;break;case"content":this.contentTemplate=e.template;break;case"toolbar":this.toolbarTemplate=e.template;break;case"chooseicon":this.chooseIconTemplate=e.template;break;case"uploadicon":this.uploadIconTemplate=e.template;break;case"cancelicon":this.cancelIconTemplate=e.template;break;case"empty":this.emptyTemplate=e.template;break;default:this.fileTemplate=e.template;break}})}ngOnInit(){this.translationSubscription=this.config.translationObserver.subscribe(()=>{this.cd.markForCheck()})}ngAfterViewInit(){R(this.platformId)&&this.mode==="advanced"&&this.zone.runOutsideAngular(()=>{this.content&&(this.dragOverListener=this.renderer.listen(this.content.nativeElement,"dragover",this.onDragOver.bind(this)))})}getTranslation(e){return this.config.getTranslation(e)}choose(){this.advancedFileInput?.nativeElement.click()}onFileSelect(e){if(e.type!=="drop"&&this.isIE11()&&this.duplicateIEEvent){this.duplicateIEEvent=!1;return}this.msgs=[],this.multiple||(this.files=[]);let i=e.dataTransfer?e.dataTransfer.files:e.target.files;for(let n=0;n<i.length;n++){let r=i[n];this.isFileSelected(r)||this.validate(r)&&(this.isImage(r)&&(r.objectURL=this.sanitizer.bypassSecurityTrustUrl(window.URL.createObjectURL(i[n]))),this.files.push(i[n]))}this.onSelect.emit({originalEvent:e,files:i,currentFiles:this.files}),this.checkFileLimit(i),this.hasFiles()&&this.auto&&(this.mode!=="advanced"||!this.isFileLimitExceeded())&&this.upload(),e.type!=="drop"&&this.isIE11()?this.clearIEInput():this.clearInputElement()}isFileSelected(e){for(let i of this.files)if(i.name+i.type+i.size===e.name+e.type+e.size)return!0;return!1}isIE11(){if(R(this.platformId))return!!this.document.defaultView.MSInputMethodContext&&!!this.document.documentMode}validate(e){return this.msgs=this.msgs||[],this.accept&&!this.isFileTypeValid(e)?(this.msgs.push({severity:"error",summary:this.invalidFileTypeMessageSummary.replace("{0}",e.name),detail:this.invalidFileTypeMessageDetail.replace("{0}",this.accept)}),!1):this.maxFileSize&&e.size>this.maxFileSize?(this.msgs.push({severity:"error",summary:this.invalidFileSizeMessageSummary.replace("{0}",e.name),detail:this.invalidFileSizeMessageDetail.replace("{0}",this.formatSize(this.maxFileSize))}),!1):!0}isFileTypeValid(e){let i=this.accept?.split(",").map(n=>n.trim());for(let n of i)if(this.isWildcard(n)?this.getTypeClass(e.type)===this.getTypeClass(n):e.type==n||this.getFileExtension(e).toLowerCase()===n.toLowerCase())return!0;return!1}getTypeClass(e){return e.substring(0,e.indexOf("/"))}isWildcard(e){return e.indexOf("*")!==-1}getFileExtension(e){return"."+e.name.split(".").pop()}isImage(e){return/^image\//.test(e.type)}onImageLoad(e){window.URL.revokeObjectURL(e.src)}upload(){if(this.customUpload)this.fileLimit&&(this.uploadedFileCount+=this.files.length),this.uploadHandler.emit({files:this.files}),this.cd.markForCheck();else{this.uploading=!0,this.msgs=[];let e=new FormData;this.onBeforeUpload.emit({formData:e});for(let i=0;i<this.files.length;i++)e.append(this.name,this.files[i],this.files[i].name);this.cancelUploadRequest(),this.fileUploadSubcription=this.http.request(this.method,this.url,{body:e,headers:this.headers,reportProgress:!0,observe:"events",withCredentials:this.withCredentials}).subscribe(i=>{switch(i.type){case B.Sent:this.onSend.emit({originalEvent:i,formData:e});break;case B.Response:this.uploading=!1,this.progress=0,i.status>=200&&i.status<300?(this.fileLimit&&(this.uploadedFileCount+=this.files.length),this.onUpload.emit({originalEvent:i,files:this.files})):this.onError.emit({files:this.files}),this.uploadedFiles.push(...this.files),this.clear();break;case B.UploadProgress:{i.loaded&&(this.progress=Math.round(i.loaded*100/i.total)),this.onProgress.emit({originalEvent:i,progress:this.progress});break}}this.cd.markForCheck()},i=>{this.uploading=!1,this.onError.emit({files:this.files,error:i})})}}clear(){this.files=[],this.uploadedFileCount=0,this.cancelUploadRequest(),this.onClear.emit(),this.clearInputElement(),this.cd.markForCheck()}remove(e,i){this.cancelUploadRequest(),this.clearInputElement(),this.onRemove.emit({originalEvent:e,file:this.files[i]}),this.files.splice(i,1),this.checkFileLimit(this.files)}removeUploadedFile(e){let i=this.uploadedFiles.splice(e,1)[0];this.uploadedFiles=[...this.uploadedFiles],this.onRemoveUploadedFile.emit({file:i,files:this.uploadedFiles})}cancelUploadRequest(){this.fileUploadSubcription&&(this.fileUploadSubcription.unsubscribe(),this.fileUploadSubcription=void 0)}isFileLimitExceeded(){let i=this.auto?this.files.length:this.files.length+this.uploadedFileCount;return this.fileLimit&&this.fileLimit<=i&&this.focus&&(this.focus=!1),this.fileLimit&&this.fileLimit<i}isChooseDisabled(){return this.auto?this.fileLimit&&this.fileLimit<=this.files.length:this.fileLimit&&this.fileLimit<=this.files.length+this.uploadedFileCount}checkFileLimit(e){this.msgs??=[];let i=this.msgs.length>0&&this.fileLimit<e.length;(this.isFileLimitExceeded()||i)&&this.msgs.push({severity:"error",summary:this.invalidFileLimitMessageSummary.replace("{0}",this.fileLimit.toString()),detail:this.invalidFileLimitMessageDetail.replace("{0}",this.fileLimit.toString())})}clearInputElement(){this.advancedFileInput&&this.advancedFileInput.nativeElement&&(this.advancedFileInput.nativeElement.value=""),this.basicFileInput&&this.basicFileInput.nativeElement&&(this.basicFileInput.nativeElement.value="")}clearIEInput(){this.advancedFileInput&&this.advancedFileInput.nativeElement&&(this.duplicateIEEvent=!0,this.advancedFileInput.nativeElement.value="")}hasFiles(){return this.files&&this.files.length>0}hasUploadedFiles(){return this.uploadedFiles&&this.uploadedFiles.length>0}onDragEnter(e){this.disabled||(e.stopPropagation(),e.preventDefault())}onDragOver(e){this.disabled||(O.addClass(this.content?.nativeElement,"p-fileupload-highlight"),this.dragHighlight=!0,e.stopPropagation(),e.preventDefault())}onDragLeave(e){this.disabled||O.removeClass(this.content?.nativeElement,"p-fileupload-highlight")}onDrop(e){if(!this.disabled){O.removeClass(this.content?.nativeElement,"p-fileupload-highlight"),e.stopPropagation(),e.preventDefault();let i=e.dataTransfer?e.dataTransfer.files:e.target.files;(this.multiple||i&&i.length===1)&&this.onFileSelect(e)}}onFocus(){this.focus=!0}onBlur(){this.focus=!1}formatSize(e){let r=this.getTranslation(T.FILE_SIZE_TYPES);if(e===0)return`0 ${r[0]}`;let g=Math.floor(Math.log(e)/Math.log(1024));return`${(e/Math.pow(1024,g)).toFixed(3)} ${r[g]}`}onBasicUploaderClick(){this.hasFiles()?this.upload():this.basicFileInput?.nativeElement.click()}onBasicKeydown(e){switch(e.code){case"Space":case"Enter":this.onBasicUploaderClick(),e.preventDefault();break}}imageError(e){this.onImageError.emit(e)}getBlockableElement(){return this.el.nativeElement.children[0]}get chooseButtonLabel(){return this.chooseLabel||this.config.getTranslation(T.CHOOSE)}get uploadButtonLabel(){return this.uploadLabel||this.config.getTranslation(T.UPLOAD)}get cancelButtonLabel(){return this.cancelLabel||this.config.getTranslation(T.CANCEL)}get browseFilesLabel(){return this.config.getTranslation(T.ARIA)[T.BROWSE_FILES]}ngOnDestroy(){this.content&&this.content.nativeElement&&this.dragOverListener&&(this.dragOverListener(),this.dragOverListener=null),this.translationSubscription&&this.translationSubscription.unsubscribe()}static \u0275fac=function(i){return new(i||t)(b(_e),b(G),b(J),b(K),b(Ce),b(X),b(be),b(de),b(Fe))};static \u0275cmp=M({type:t,selectors:[["p-fileUpload"]],contentQueries:function(i,n,r){if(i&1&&ne(r,ye,4),i&2){let g;w(g=S())&&(n.templates=g)}},viewQuery:function(i,n){if(i&1&&(V(Be,5),V(Oe,5),V(Re,5)),i&2){let r;w(r=S())&&(n.advancedFileInput=r.first),w(r=S())&&(n.basicFileInput=r.first),w(r=S())&&(n.content=r.first)}},hostAttrs:[1,"p-element"],inputs:{name:"name",url:"url",method:"method",multiple:[2,"multiple","multiple",I],accept:"accept",disabled:[2,"disabled","disabled",I],auto:[2,"auto","auto",I],withCredentials:[2,"withCredentials","withCredentials",I],maxFileSize:[2,"maxFileSize","maxFileSize",D],invalidFileSizeMessageSummary:"invalidFileSizeMessageSummary",invalidFileSizeMessageDetail:"invalidFileSizeMessageDetail",invalidFileTypeMessageSummary:"invalidFileTypeMessageSummary",invalidFileTypeMessageDetail:"invalidFileTypeMessageDetail",invalidFileLimitMessageDetail:"invalidFileLimitMessageDetail",invalidFileLimitMessageSummary:"invalidFileLimitMessageSummary",style:"style",styleClass:"styleClass",previewWidth:[2,"previewWidth","previewWidth",D],chooseLabel:"chooseLabel",uploadLabel:"uploadLabel",cancelLabel:"cancelLabel",chooseIcon:"chooseIcon",uploadIcon:"uploadIcon",cancelIcon:"cancelIcon",showUploadButton:[2,"showUploadButton","showUploadButton",I],showCancelButton:[2,"showCancelButton","showCancelButton",I],mode:"mode",headers:"headers",customUpload:[2,"customUpload","customUpload",I],fileLimit:[2,"fileLimit","fileLimit",e=>D(e,null)],uploadStyleClass:"uploadStyleClass",cancelStyleClass:"cancelStyleClass",removeStyleClass:"removeStyleClass",chooseStyleClass:"chooseStyleClass",files:"files"},outputs:{onBeforeUpload:"onBeforeUpload",onSend:"onSend",onUpload:"onUpload",onError:"onError",onClear:"onClear",onRemove:"onRemove",onSelect:"onSelect",onProgress:"onProgress",uploadHandler:"uploadHandler",onImageError:"onImageError",onRemoveUploadedFile:"onRemoveUploadedFile"},features:[te],decls:2,vars:2,consts:[["advancedfileinput",""],["content",""],["chooseSection",""],["basicfileinput",""],[3,"ngClass","ngStyle","class",4,"ngIf"],["class","p-fileupload p-fileupload-basic p-component",4,"ngIf"],[3,"ngClass","ngStyle"],["type","file",3,"change","multiple","accept","disabled"],[1,"p-fileupload-buttonbar"],[4,"ngIf"],[4,"ngTemplateOutlet","ngTemplateOutletContext"],[4,"ngTemplateOutlet"],[1,"p-fileupload-content",3,"dragenter","dragleave","drop"],[3,"value","showValue",4,"ngIf"],[3,"value","enableService"],["class","p-fileupload-files",4,"ngIf"],["class","p-fileupload-empty",4,"ngIf"],["pRipple","","tabindex","0",1,"p-button","p-component","p-fileupload-choose",3,"focus","blur","click","keydown.enter","ngClass"],[3,"ngClass","class",4,"ngIf"],[1,"p-button-label"],["type","button",3,"label","disabled","styleClass","onClick",4,"ngIf"],[3,"ngClass"],[3,"styleClass",4,"ngIf"],["class","p-button-icon p-button-icon-left",4,"ngIf"],[3,"styleClass"],[1,"p-button-icon","p-button-icon-left"],["type","button",3,"onClick","label","disabled","styleClass"],["class","p-button-icon p-button-icon-left",3,"ngClass",4,"ngIf"],[1,"p-button-icon","p-button-icon-left",3,"ngClass"],[3,"value","showValue"],[1,"p-fileupload-files"],["class","p-fileupload-row",4,"ngFor","ngForOf"],[1,"p-fileupload-row"],[1,"p-fileupload-filename"],["type","button","pButton","",1,"p-button-icon-only",3,"click","disabled"],[3,"error","src","width"],["ngFor","",3,"ngForOf","ngForTemplate"],[1,"p-fileupload-empty"],[1,"p-fileupload","p-fileupload-basic","p-component"],["tabindex","0","pRipple","",3,"click","keydown","ngClass","ngStyle"],[4,"ngIf","ngIfElse"],["class","p-button-label",4,"ngIf"],["type","file",3,"accept","multiple","disabled","change","focus","blur",4,"ngIf"],["class","p-button-icon p-button-icon-left pi",3,"ngClass",4,"ngIf"],[1,"p-button-icon","p-button-icon-left","pi",3,"ngClass"],["class","p-button-icon p-button-icon-left pi",4,"ngIf"],[1,"p-button-icon","p-button-icon-left","pi"],["type","file",3,"change","focus","blur","accept","multiple","disabled"]],template:function(i,n){i&1&&p(0,It,14,42,"div",4)(1,At,8,17,"div",5),i&2&&(a("ngIf",n.mode==="advanced"),l(),a("ngIf",n.mode==="basic"))},dependencies:()=>[ue,me,fe,ge,he,we,Se,Le,Ee,Ie,A,Q,P],styles:[`@layer primeng{.p-fileupload-content{position:relative}.p-fileupload-row{display:flex;align-items:center}.p-fileupload-row>div{flex:1 1 auto;width:25%}.p-fileupload-row>div:last-child{text-align:right}.p-fileupload-content .p-progressbar{width:100%;position:absolute;top:0;left:0}.p-button.p-fileupload-choose{position:relative;overflow:hidden}.p-button.p-fileupload-choose input[type=file],.p-fileupload-choose.p-fileupload-choose-selected input[type=file]{display:none}.p-fluid .p-fileupload .p-button{width:auto}.p-fileupload-filename{word-break:break-all}}
`],encapsulation:2,changeDetection:0})}return t})(),xi=(()=>{class t{static \u0275fac=function(i){return new(i||t)};static \u0275mod=W({type:t});static \u0275inj=q({imports:[ve,z,j,N,H,Te,A,Q,P,z,j,N,H]})}return t})();export{Ci as a,xi as b};
