import{a as Ie}from"./chunk-Y4G5GUBV.js";import{a as De,b as Ve}from"./chunk-JGDHNRTM.js";import"./chunk-RMFINLED.js";import{a as Se,b as ke}from"./chunk-3P66YKNC.js";import{a as A}from"./chunk-TOYKGQGS.js";import{k as ve}from"./chunk-KG7YTVHA.js";import"./chunk-NVGTPZR2.js";import"./chunk-ATI5C2A4.js";import{b as Ce}from"./chunk-SWT3BTO7.js";import"./chunk-J4AIIC6A.js";import"./chunk-Q2ITSG2L.js";import"./chunk-KPXVOOCJ.js";import"./chunk-TNABXVKL.js";import{a as we,b as xe}from"./chunk-6Z3H2M45.js";import"./chunk-VLJCDE2P.js";import{b as he,d as Me,f as Pe,g as be}from"./chunk-QVONU2JU.js";import{b as ye}from"./chunk-CKGIWHXC.js";import{b as Oe}from"./chunk-3Y45ZQMX.js";import{b as me}from"./chunk-PAKM22Z6.js";import{i as ge,l as _e}from"./chunk-RXT5QTRP.js";import"./chunk-CM56NBY7.js";import"./chunk-YRMYVX5W.js";import"./chunk-XSHLOVSR.js";import"./chunk-KRKZIUB7.js";import{a as ue,b as fe}from"./chunk-4RWBCLJX.js";import"./chunk-T22KTX4I.js";import"./chunk-YUR3ZCTK.js";import"./chunk-O6DKXQN7.js";import"./chunk-36GPJXQ3.js";import"./chunk-UHFSMSZS.js";import"./chunk-ATZD6M4U.js";import{b as ce,d as le,e as de,h as pe}from"./chunk-3ZIDJAHB.js";import"./chunk-XSSXK7EZ.js";import{A as se,i as I,n as oe,y as re,z as ae}from"./chunk-CCYSFV2Z.js";import{Cb as te,Da as x,Ea as _,Fa as C,Fb as ne,Hb as V,I as h,Ia as G,La as Q,M as O,Ma as q,N as M,Na as J,Oa as Z,Pa as u,Ra as T,S as m,Sa as K,T as g,Ta as S,U as W,Ua as k,Va as D,Vb as ie,Wa as X,Ya as L,Yb as B,aa as U,ca as y,da as p,e as E,ea as b,fb as j,hb as F,oa as P,pa as w,qa as f,ra as z,sa as H,ta as N,xa as r,xb as Y,ya as s,yb as $,za as v,zb as ee}from"./chunk-EOM5JP26.js";var Ee=(()=>{class o{styleClass;style;strokeWidth="2";fill="none";animationDuration="2s";static \u0275fac=function(e){return new(e||o)};static \u0275cmp=O({type:o,selectors:[["p-progressSpinner"]],hostAttrs:[1,"p-element"],inputs:{styleClass:"styleClass",style:"style",strokeWidth:"strokeWidth",fill:"fill",animationDuration:"animationDuration"},decls:3,vars:10,consts:[["role","progressbar",1,"p-progress-spinner",3,"ngStyle","ngClass"],["viewBox","25 25 50 50",1,"p-progress-spinner-svg"],["cx","50","cy","50","r","20","stroke-miterlimit","10",1,"p-progress-spinner-circle"]],template:function(e,n){e&1&&(r(0,"div",0),W(),r(1,"svg",1),v(2,"circle",2),s()()),e&2&&(f("ngStyle",n.style)("ngClass",n.styleClass),w("aria-busy",!0)("data-pc-name","progressspinner")("data-pc-section","root"),p(),z("animation-duration",n.animationDuration),w("data-pc-section","root"),p(),w("fill",n.fill)("stroke-width",n.strokeWidth))},dependencies:[Y,te],styles:[`@layer primeng{.p-progress-spinner{position:relative;margin:0 auto;width:100px;height:100px;display:inline-block}.p-progress-spinner:before{content:"";display:block;padding-top:100%}.p-progress-spinner-svg{animation:p-progress-spinner-rotate 2s linear infinite;height:100%;transform-origin:center center;width:100%;position:absolute;inset:0;margin:auto}.p-progress-spinner-circle{stroke-dasharray:89,200;stroke-dashoffset:0;stroke:#d62d20;animation:p-progress-spinner-dash 1.5s ease-in-out infinite,p-progress-spinner-color 6s ease-in-out infinite;stroke-linecap:round}}@keyframes p-progress-spinner-rotate{to{transform:rotate(360deg)}}@keyframes p-progress-spinner-dash{0%{stroke-dasharray:1,200;stroke-dashoffset:0}50%{stroke-dasharray:89,200;stroke-dashoffset:-35px}to{stroke-dasharray:89,200;stroke-dashoffset:-124px}}@keyframes p-progress-spinner-color{to,0%{stroke:#d62d20}40%{stroke:#0057e7}66%{stroke:#008744}80%,90%{stroke:#ffa700}}
`],encapsulation:2,changeDetection:0})}return o})(),Ne=(()=>{class o{static \u0275fac=function(e){return new(e||o)};static \u0275mod=M({type:o});static \u0275inj=h({imports:[V]})}return o})();var Re=["fileInput"],We=()=>({width:"450px"}),Ue=()=>({width:"50px",height:"50px",position:"fixed",top:"50%",left:"50%",transform:"translate(-50%, -50%)"});function ze(o,i){o&1&&(r(0,"div",20)(1,"div",21),u(2," LARGUE A IMAGEM AQUI "),s()())}function He(o,i){if(o&1){let d=x();r(0,"p-checkbox",28),D("ngModelChange",function(n){let t=m(d).$implicit,a=C().$implicit;return k(a.services[t.name],n)||(a.services[t.name]=n),g(n)}),_("onChange",function(){m(d);let n=C(3);return g(n.calculateValue())}),s()}if(o&2){let d=i.$implicit,e=C().$implicit;S("ngModel",e.services[d.name]),f("label",d.name)}}function Ge(o,i){if(o&1){let d=x();r(0,"li"),v(1,"img",24),r(2,"span"),u(3),s(),r(4,"button",25),_("click",function(){let n=m(d).index,t=C(2);return g(t.removeFile(n))}),s(),r(5,"div",26),P(6,He,1,2,"p-checkbox",27),s()()}if(o&2){let d=i.$implicit,e=C(2);p(),G("alt",d.file.name),f("src",d.objectURL,U),p(2),K("",d.file.name," - ",d.file.size," bytes"),p(3),f("ngForOf",e.servicos)}}function Qe(o,i){if(o&1&&(r(0,"div",22)(1,"ul"),P(2,Ge,7,5,"li",23),s()()),o&2){let d=C();p(2),f("ngForOf",d.newOrder.files)}}function qe(o,i){o&1&&v(0,"p-progressSpinner",29),o&2&&N(L(2,Ue))}var Te=(()=>{let i=class i{constructor(e,n,t){this.servicoService=e,this.router=n,this.messageService=t,this.isDragging=!1,this.isLoading=!1,this.orderSummaryDialog=!1,this.couponCode="",this.discount=0,this.servicos=[],this.newOrder={files:[],services:{},observations:"",value:0,orderDate:new Date,deliveryDate:null,resultUrl:""},this.preferenceId=""}ngOnInit(){this.loadServicos()}loadServicos(){this.servicoService.getServicos().subscribe(e=>{this.servicos=e})}onFileSelected(e){let n=e.target.files;for(let t of n){let a=URL.createObjectURL(t);this.newOrder.files.push({file:t,objectURL:a,services:{}}),this.servicos.forEach(c=>{this.newOrder.files[this.newOrder.files.length-1].services[c.name]=!1})}this.calculateValue()}removeFile(e){this.newOrder.files.splice(e,1),this.calculateValue()}onDragOver(e){e.preventDefault(),this.isDragging=!0}onDragLeave(e){e.target===document.body&&(this.isDragging=!1)}onDrop(e){e.preventDefault(),this.isDragging=!1;let n=e.dataTransfer.files;for(let t of n){let a=URL.createObjectURL(t);this.newOrder.files.push({file:t,objectURL:a,services:{}}),this.servicos.forEach(c=>{this.newOrder.files[this.newOrder.files.length-1].services[c.name]=!1})}this.calculateValue()}calculateValue(){let e=this.newOrder.files.reduce((n,t)=>{let a=Object.keys(t.services).reduce((c,l)=>{let je=this.servicos.find(Fe=>Fe.name===l);return c+(t.services[l]?je.price:0)},0);return n+a},0);this.newOrder.value=e-this.discount}applyCoupon(){this.couponCode==="DIGITALIZEAI10"?(this.discount=this.newOrder.value*.1,this.messageService.add({severity:"success",summary:"Cupom aplicado",detail:"10% de desconto aplicado!"})):(this.discount=0,this.messageService.add({severity:"error",summary:"Erro",detail:"Cupom inv\xE1lido."})),this.calculateValue()}openOrderSummary(){if(this.isLoading=!0,this.newOrder.value<=0){this.messageService.add({severity:"error",summary:"Erro",detail:"O valor total deve ser maior que zero."}),this.isLoading=!1;return}this.createCheckoutButton(),this.orderSummaryDialog=!0}createCheckoutButton(){return E(this,null,function*(){try{let e=yield A.get("http://localhost:3000/create_preference");this.preferenceId=e.data.preferenceId,yield new window.MercadoPago("TEST-a45e1791-b190-4123-843b-7a4376e382bd").bricks().create("wallet","wallet_container",{initialization:{preferenceId:this.preferenceId},customization:{texts:{valueProp:"smart_option"}}}),yield this.updatePreference(),this.isLoading=!1}catch(e){console.error("Error creating preference:",e),this.isLoading=!1}})}updatePreference(){return E(this,null,function*(){try{yield A.post("http://localhost:3000/update_preference",{preferenceId:this.preferenceId,totalValue:this.newOrder.value})}catch(e){console.error("Error updating preference:",e),this.messageService.add({severity:"error",summary:"Erro",detail:"N\xE3o foi poss\xEDvel atualizar a prefer\xEAncia."})}})}};i.\u0275fac=function(n){return new(n||i)(b(Ie),b(ie),b(I))},i.\u0275cmp=O({type:i,selectors:[["app-novo-pedido"]],viewQuery:function(n,t){if(n&1&&Q(Re,5),n&2){let a;q(a=J())&&(t.fileInput=a.first)}},hostBindings:function(n,t){n&1&&_("dragover",function(c){return t.onDragOver(c)},!1,y)("dragleave",function(c){return t.onDragLeave(c)},!1,y)("drop",function(c){return t.onDrop(c)},!1,y)},features:[X([I])],decls:42,vars:19,consts:[["fileInput",""],[1,"novo-pedido-container"],["class","overlay",4,"ngIf"],[1,"card"],[1,"upload-area",3,"dragover","drop","dragleave"],[1,"drag-drop-area"],[1,"upload-actions"],["pButton","","label","Escolha a imagem para vetorizar",3,"click"],["type","file","multiple","",2,"display","none",3,"change"],["class","uploaded-files",4,"ngIf"],[1,"p-field"],["for","coupon"],["id","coupon","type","text","pInputText","",3,"ngModelChange","ngModel"],["pButton","","label","Aplicar Cupom",3,"click"],["pButton","","label","Avan\xE7ar","icon","pi pi-check",3,"click"],["ariaLabel","loading",3,"style",4,"ngIf"],["header","Confirma\xE7\xE3o do Pedido",3,"visibleChange","visible","modal"],[1,"p-fluid"],["id","wallet_container"],["label","Cancelar","icon","pi pi-times",1,"p-button-text",3,"click"],[1,"overlay"],[1,"overlay-content"],[1,"uploaded-files"],[4,"ngFor","ngForOf"],[1,"thumbnail",3,"src","alt"],["pButton","","icon","pi pi-times",1,"remove-btn",3,"click"],[1,"services"],["binary","true",3,"ngModel","label","ngModelChange","onChange",4,"ngFor","ngForOf"],["binary","true",3,"ngModelChange","onChange","ngModel","label"],["ariaLabel","loading"]],template:function(n,t){if(n&1){let a=x();r(0,"div",1),P(1,ze,3,0,"div",2),r(2,"div",3)(3,"h2"),u(4,"Rastreie pixels para vetores em full color"),s(),r(5,"p"),u(6,"Converta suas imagens PNG e JPG para vetores CorelDRAW e PDF"),s(),r(7,"div",4),_("dragover",function(l){return m(a),g(t.onDragOver(l))})("drop",function(l){return m(a),g(t.onDrop(l))})("dragleave",function(l){return m(a),g(t.onDragLeave(l))}),r(8,"div",5)(9,"span"),u(10,"ARRASTE A IMAGEM AQUI PARA COME\xC7AR"),s()()(),r(11,"div",6)(12,"span"),u(13,"ou"),s(),r(14,"button",7),_("click",function(){m(a);let l=Z(16);return g(l.click())}),s(),r(15,"input",8,0),_("change",function(l){return m(a),g(t.onFileSelected(l))}),s(),r(17,"span"),u(18,"ou pressione CTRL + V"),s()(),P(19,Qe,3,1,"div",9),r(20,"div",10)(21,"label",11),u(22,"Cupom de Desconto"),s(),r(23,"input",12),D("ngModelChange",function(l){return m(a),k(t.couponCode,l)||(t.couponCode=l),g(l)}),s(),r(24,"button",13),_("click",function(){return m(a),g(t.applyCoupon())}),s()(),r(25,"h5"),u(26),j(27,"currency"),s(),r(28,"button",14),_("click",function(){return m(a),g(t.openOrderSummary())}),s()()(),P(29,qe,1,3,"p-progressSpinner",15),r(30,"p-dialog",16),D("visibleChange",function(l){return m(a),k(t.orderSummaryDialog,l)||(t.orderSummaryDialog=l),g(l)}),r(31,"div",17)(32,"div",10)(33,"h4"),u(34,"Resumo do Pedido"),s(),r(35,"p"),u(36),j(37,"currency"),s(),v(38,"div",18),s()(),r(39,"p-footer")(40,"p-button",19),_("click",function(){return m(a),g(t.orderSummaryDialog=!1)}),s()()(),v(41,"p-toast")}n&2&&(H("blurred",t.isLoading),p(),f("ngIf",t.isDragging),p(18),f("ngIf",t.newOrder.files.length),p(4),S("ngModel",t.couponCode),p(3),T("Valor Total: ",F(27,12,t.newOrder.value,"BRL"),""),p(3),f("ngIf",t.isLoading),p(),N(L(18,We)),S("visible",t.orderSummaryDialog),f("modal",!0),p(6),T("Valor Total: ",F(37,15,t.newOrder.value,"BRL"),""))},dependencies:[$,ee,ce,le,de,oe,re,ae,ue,De,we,Ee,Se,ne],styles:[".novo-pedido-container[_ngcontent-%COMP%]{position:relative;display:flex;justify-content:center;align-items:center;flex-direction:column;min-height:100vh}.novo-pedido-container[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]{width:80%;max-width:800px;padding:2rem;box-shadow:0 2px 10px #0000001a;border-radius:8px;text-align:center}.novo-pedido-container[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:2rem;margin-bottom:1rem}.novo-pedido-container[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:1rem;margin-bottom:1rem}.novo-pedido-container[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .upload-area[_ngcontent-%COMP%]{margin:2rem 0;border:2px dashed #ccc;padding:4rem;border-radius:8px;display:flex;align-items:center;justify-content:center;position:relative;height:200px}.novo-pedido-container[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .upload-area[_ngcontent-%COMP%]:hover{background-color:#f9f9f9;opacity:5%}.novo-pedido-container[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .upload-area[_ngcontent-%COMP%]   .drag-drop-area[_ngcontent-%COMP%]{text-align:center}.novo-pedido-container[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .upload-actions[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;margin-top:1rem}.novo-pedido-container[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .upload-actions[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{margin:0 .5rem}.novo-pedido-container[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .upload-actions[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{width:150px;border-radius:25px;margin:0 .5rem;padding:.5rem 1rem;background-color:#007bff;color:#fff;border:none;cursor:pointer}.novo-pedido-container[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .upload-actions[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover{background-color:#0056b3}.novo-pedido-container[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .uploaded-files[_ngcontent-%COMP%]{display:flex;justify-content:center;margin-top:1rem}.novo-pedido-container[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .uploaded-files[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]{list-style-type:none;padding:0}.novo-pedido-container[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .uploaded-files[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{margin-bottom:.5rem;font-size:.9rem;display:flex;align-items:center}.novo-pedido-container[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .uploaded-files[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   .thumbnail[_ngcontent-%COMP%]{width:50px;height:50px;object-fit:cover;border-radius:8px;margin-right:.5rem}.novo-pedido-container[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .uploaded-files[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{flex-grow:1;margin-left:.5rem}.novo-pedido-container[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .uploaded-files[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   .remove-btn[_ngcontent-%COMP%]{background:none;border:none;color:red;cursor:pointer}.novo-pedido-container[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .uploaded-files[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   .remove-btn[_ngcontent-%COMP%]:hover{color:#c00}.novo-pedido-container[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .services[_ngcontent-%COMP%]{display:flex;justify-content:center;margin:1rem 0}.novo-pedido-container[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .services[_ngcontent-%COMP%]   p-checkbox[_ngcontent-%COMP%]{margin-right:1rem}.novo-pedido-container[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .services[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{margin-right:2rem}.novo-pedido-container[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .p-field[_ngcontent-%COMP%]{margin-top:2rem}.novo-pedido-container[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .p-field[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]{width:100%}.novo-pedido-container[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{margin-top:2rem;width:100%;padding:.75rem;border-radius:50px;background-color:#007bff;color:#fff;border:none;cursor:pointer}.novo-pedido-container[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover{background-color:#0056b3}.novo-pedido-container[_ngcontent-%COMP%]   .overlay[_ngcontent-%COMP%]{position:fixed;top:0;left:0;width:100%;height:100%;background:#ffffffe6;display:flex;justify-content:center;align-items:center;z-index:1000}.novo-pedido-container[_ngcontent-%COMP%]   .overlay[_ngcontent-%COMP%]   .overlay-content[_ngcontent-%COMP%]{font-size:2rem;color:#333;font-weight:700}.blurred[_ngcontent-%COMP%]{filter:blur(5px);pointer-events:none;-webkit-user-select:none;user-select:none}"]});let o=i;return o})();var Le=(()=>{let i=class i{};i.\u0275fac=function(n){return new(n||i)},i.\u0275mod=M({type:i}),i.\u0275inj=h({imports:[B.forChild([{path:"",component:Te}]),B]});let o=i;return o})();var Nt=(()=>{let i=class i{};i.\u0275fac=function(n){return new(n||i)},i.\u0275mod=M({type:i}),i.\u0275inj=h({imports:[V,pe,Le,he,me,Me,ge,Pe,_e,be,Oe,ye,fe,ve,se,Ve,Ce,xe,Ne,ke]});let o=i;return o})();export{Nt as NovoPedidoModule};
